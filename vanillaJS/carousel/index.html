<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carousel UI</title>
  <link rel="stylesheet" href="carousel.css">
</head>
<body>
  <div class="carousel"></div>

<script>
  var img = ['img1.jpg', 'img2.jpg', 'img3.jpg', 'img4.jpg', 'img5.jpg'];
  carousel(".carousel","images/", img);

  function carousel(cls, src, imgArr) {
    var carousel = document.querySelector(cls);
    var imgSrc = src; // 경로
    var imgName = imgArr; // 이미지 배열
    var nowImg = 0; // 현재 이미지 index
    var totalImg = imgArr.length; // 전체 이미지 수
    var currentImg; // 이전 이미지 index를 저장할 변수

    carousel.innerHTML = `<div class="carousel-list"></div><div class="carousel-arr"></div><div class="carousel-dots"></div>`;
    document.querySelector(".carousel-list").innerHTML = `<img src="` + imgSrc + imgName[nowImg] + `" alt="">`
    document.querySelector(".carousel-arr").innerHTML = `<button class="arr-prev">이전</button><button class="arr-next">다음</button>`

    var carouselDot = document.querySelector(".carousel-dots");
    for (var idxDot = 1; idxDot <= totalImg; idxDot++) {
      carouselDot.innerHTML += `<button>` + idxDot + `</button>`;
      carouselDot.childNodes[nowImg].setAttribute("class","active");
    }

    var arrDot = [];
    var dotBtn = document.querySelectorAll(".carousel-dots button");
    for (var dotBtnIdx = 0; dotBtnIdx < totalImg; dotBtnIdx++) {
      arrDot[dotBtnIdx] = function (idx) {
        dotBtn[idx].addEventListener("click", function () {
          prevNext(nowImg, idx);
          nowImg = idx;
        });
      }(dotBtnIdx);
    }
  
    document.querySelector(".carousel-arr .arr-prev").addEventListener("click", function () {
      currentImg = nowImg;
      nowImg--;
      if (nowImg <= -1) {
        nowImg = totalImg - 1;
      }
      prevNext(currentImg, nowImg);
    });

    function prevNext(current, change) {
      document.querySelector(".carousel-list img").setAttribute("src", imgSrc + imgName[change]);
      dotBtn[current].classList.remove("active");
      dotBtn[change].classList.add("active");
    }
  }
</script>

<!-- <script src="carousel.js"></script> -->

</body>
</html>